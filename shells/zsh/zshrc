
###################
# history options #
###################

# don't put duplicate lines in the history. See bash(1) for more options
# ... or force ignoredups and ignorespace
HISTFILE="$HOME/.zsh/history"
HISTSIZE=10000
SAVEHIST=10000
# Ignore these commands
HISTIGNORE='ls:bg:fg:history:ll:exit:pwd:cd:cd -:exit:date:* --help'
# Share history between sessions
setopt SHARE_HISTORY
# Write history incrementally (after each command)
setopt INC_APPEND_HISTORY
# Don't record dupes in history
setopt HIST_IGNORE_ALL_DUPS
# Remove excess blanks in command line
setopt HIST_REDUCE_BLANKS
# Append to history (instead of overwriting it)
setopt APPEND_HISTORY
# Store datetime in history file
setopt EXTENDED_HISTORY
# Allows comments in interactive mode
setopt INTERACTIVE_COMMENTS

#########################
# included config files #
#########################

source ~/.zsh/prompt
source ~/.zsh/alias
source ~/.zsh/func
source ~/.zsh/zshmarks
source ~/.zsh/completion
source ~/.zsh/terminalapp

# Homebrew virtualenvwrapper
if [ -f /usr/local/bin/virtualenvwrapper.sh ]; then
    source /usr/local/bin/virtualenvwrapper.sh
fi
# Ubuntu virtual wrapper
if [ -f /usr/share/virtualenvwrapper/virtualenvwrapper.sh ]; then
    source /usr/share/virtualenvwrapper/virtualenvwrapper.sh
fi

# Hint for missing package
if [ -f /etc/zsh_command_not_found ]; then
    source /etc/zsh_command_not_found
fi

# Colorization of command line similar to fish shell
# source ~/src/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh


####################
# terminal options #
####################

# Rebind codes to what I expect them to do
bindkey '^[[3~' delete-char
bindkey '^A' beginning-of-line
bindkey ';5D' beginning-of-line
bindkey '^E' end-of-line
bindkey ';5C' end-of-line
bindkey '^[f' forward-word
bindkey '^[b' backward-word
bindkey ';3C' forward-word
bindkey ';3D' backward-word
bindkey '^[K' kill-line
bindkey '^[U' backward-kill-line
bindkey '^[R' history-incremental-pattern-search-backward

# Disable special handling of ^s and ^q by OS X Terminal
stty -ixon -ixoff


###############
# zsh options #
###############

# `**/qux` will enter `./foo/bar/baz/qux`
setopt autocd
# Case-insensitive globbing (used in pathname expansion)
unsetopt CASE_GLOB
# Complete on tab, leave expansion to _expand
bindkey '^I' complete-word
# Stop at directory separator when deleting words
autoload -U select-word-style
select-word-style bash
# Leave background programs running
setopt NO_HUP
# Don't beep when autocompleting
setopt NO_LIST_BEEP
# Use zmv, mass renaming module
autoload -U zmv
alias zmv="noglob zmv -W"


#################
# other options #
#################

# Colored file types for ls
eval $(dircolors -b "$HOME/.dircolors")

# turn off ZLE bracketed paste in dumb term
# otherwise turn on ZLE bracketed-paste-magic
if [[ $TERM == dumb ]]; then
    unset zle_bracketed_paste
else
    autoload -Uz bracketed-paste-magic
    zle -N bracketed-paste bracketed-paste-magic
fi

if [ -f ~/.iterm2_shell_integration.zsh ]; then
    source ~/.iterm2_shell_integration.zsh
fi

POWERLEVEL9K_MODE='nerdfont-complete'
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(context dir vcs virtualenv)
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status root_indicator background_jobs command_execution_time time battery ram)
DEFAULT_USER=osso
POWERLEVEL9K_SHORTEN_DIR_LENGTH=3
POWERLEVEL9K_HIDE_BRANCH_ICON=true
POWERLEVEL9K_PROMPT_ON_NEWLINE=true
if [ -f ~/src/powerlevel9k/powerlevel9k.zsh-theme ]; then
    source  ~/src/powerlevel9k/powerlevel9k.zsh-theme
fi
