###############
# Environment #
###############

# Language
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"

# Virtualenvs in default location (~/.virtualenvs)

# Go home!
# export GOPATH=~/go
# Paths for go
# export PATH="$PATH:$HOME/go/bin"
# Include home path (prepend so ~/bin overrides system binaries)
if [[ ! "$PATH" =~ "$HOME/bin" ]]; then
    export PATH="$HOME/bin:$PATH"
fi
# Include snaps path
# export PATH="$PATH:/snap/bin"
export PATH="$PATH:$HOME/.local/bin"
# Rust
export PATH="$PATH:$HOME/.cargo/bin"
# kubectl krew
if [[ ! "$PATH" =~ "krew" ]]; then
    export PATH="${KREW_ROOT:-$HOME/.krew}/bin:$PATH"
fi
# groundcover
if [[ ! "$PATH" =~ "groundcover" ]]; then
    export PATH="$HOME/.groundcover/bin:$PATH"
fi

# Projects directory
export PROJECTS_DIR="$HOME/Projects"

# Interactive mode environment
if [ -n "$PS1" ]; then
    # Editor
    export EDITOR='zeditor -n --wait'

    # sudo askpass helper
    export SUDO_ASKPASS="$HOME/bin/sudo-askpass.sh"

    # Colored file types for ls
    [[ -f "$HOME/.dircolors" ]] && eval $(dircolors -b "$HOME/.dircolors")

    # Kitty shell integration
    if [[ "$TERM" == "xterm-kitty" && -n $ZSH_VERSION ]]; then
        autoload -Uz -- /usr/lib/kitty/shell-integration/zsh/kitty-integration
        kitty-integration
        unfunction kitty-integration
    fi

    # Highlight section titles in manual pages (136 is yellow)
    export LESS_TERMCAP_mb=$'\e[1;31m'     # begin bold
    export LESS_TERMCAP_md=$'\e[1;33m'     # begin blink
    export LESS_TERMCAP_so=$'\e[01;44;37m' # begin reverse video
    export LESS_TERMCAP_so=$(tput bold; tput setaf 3; tput setab 8) # yellow on blue
    export LESS_TERMCAP_us=$'\e[01;37m'    # begin underline
    export LESS_TERMCAP_me=$'\e[0m'        # reset bold/blink
    export LESS_TERMCAP_se=$'\e[0m'        # reset reverse video
    export LESS_TERMCAP_ue=$'\e[0m'        # reset underline
    export GROFF_NO_SGR=1                  # for konsole and gnome-terminal
    export MANPAGER='less -s -M +Gg'

    # Better 'less': less -FRX
    # -F: quit if the contents fit the screen
    # -R: colors
    # -X: no clearing of the screen after quit
    export LESS="FRX"
fi

export DSTAT_OPTS="--bw --noupdate -cdngy -noheaders 5"

# Ollama - use Vulkan for GPU acceleration on AMD iGPU
export OLLAMA_VULKAN=1
